import"../chunks/DsnmJJEf.js";import"../chunks/CLf4CbaX.js";import{o as we}from"../chunks/bJgjr3oX.js";import{l as ke,a2 as O,C as xe,h as Ee,u as Se,r as Te,aG as Ne,ap as Ce,m,aq as y,aD as De,aA as Me,ar as h,as as b,at as Ae,aE as Ge,av as v,au as o,g as e,s as n,ax as r,aH as He,aI as R,aw as ce}from"../chunks/C9d5v2_X.js";import{e as _,s as F}from"../chunks/CxpGAOF5.js";import{i as ue}from"../chunks/DN0X4rAG.js";import{e as B,i as U}from"../chunks/BLjquezv.js";import{a as Ie,r as We}from"../chunks/OwQstUqB.js";import{p as $e,s as Pe,a as Je,b as Oe}from"../chunks/BgMmMX2O.js";import{s as Z}from"../chunks/CS0QiQyS.js";import{b as fe}from"../chunks/DS--Vk67.js";import{i as Re}from"../chunks/BQ3WBjMy.js";function Be(t,p,N=p){var w=new WeakSet;ke(t,"input",async i=>{var d=i?t.defaultValue:t.value;if(d=ee(t)?ae(d):d,N(d),O!==null&&w.add(O),await xe(),d!==(d=p())){var G=t.selectionStart,C=t.selectionEnd;t.value=d??"",C!==null&&(t.selectionStart=G,t.selectionEnd=Math.min(C,t.value.length))}}),(Ee&&t.defaultValue!==t.value||Se(p)==null&&t.value)&&(N(ee(t)?ae(t.value):t.value),O!==null&&w.add(O)),Te(()=>{var i=p();if(t===document.activeElement){var d=Ne??O;if(w.has(d))return}ee(t)&&i===ae(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function ee(t){var p=t.type;return p==="number"||p==="range"}function ae(t){return t===""?null:+t}var Ue=y('<div class="event-marker svelte-oefn5i"> </div>'),Ve=y('<div class="grid-cell svelte-oefn5i"><!></div>'),qe=y('<div class="grid-row svelte-oefn5i"></div>'),Fe=y("<div></div>"),Ke=y("<option> </option>"),Le=y("<option> </option>"),je=y('<div class="modal-backdrop svelte-oefn5i"><div class="modal svelte-oefn5i"><h3> </h3> <div class="form-group svelte-oefn5i"><label for="npc-select">NPC</label> <select id="npc-select"><option>None</option><!></select></div> <div class="form-group svelte-oefn5i"><label for="location-event">Location Event</label> <input type="text" id="location-event"/></div> <div class="form-group svelte-oefn5i"><label for="enemy-select">Enemy</label> <select id="enemy-select"><option>None</option><!></select></div> <div class="modal-buttons svelte-oefn5i"><button>Save</button> <button>Cancel</button></div></div></div>'),ze=y('<div class="map-creator-container svelte-oefn5i"><div class="grid-container svelte-oefn5i"></div> <div class="controls-container svelte-oefn5i"><h2>Tiles</h2> <div class="tile-palette svelte-oefn5i"></div> <button>Fill All</button> <button>Clear Selected Tile</button> <hr/> <h2>JSON Output</h2> <textarea readonly="" class="svelte-oefn5i"></textarea></div></div> <!>',1);function oa(t,p){Ce(p,!1);const N=20,w=20;let i=m(Array(w).fill(null).map(()=>Array(N).fill(null))),d=m([]),G=m([]),C=m([]),k=m(null),D=m(""),M=m(""),H=m(""),K=m(!1),V=m({x:0,y:0}),L=m(!1);we(async()=>{n(d,["/images/tiles/grass1.png","/images/tiles/grass2.png","/images/tiles/grass3.png","/images/tiles/grass4.png","/images/tiles/grass5.png","/images/tiles/grass6.png","/images/tiles/grass7.png","/images/tiles/grass8.png","/images/tiles/grass9.png","/images/tiles/water0.png","/images/tiles/water4.png","/images/tiles/waterBoat1.png","/images/tiles/waterBoat2.png","/images/tiles/waterPlant.png","/images/tiles/waterRock.png"]),n(G,[{id:"cassie",name:"Cassie"},{id:"kitana",name:"Kitana"},{id:"neela",name:"Neela, Water Nymph"},{id:"cygwin",name:"Cygwin, The Dubitable Nun"},{id:"wachiwi",name:"Wachiwi, The Dancing Girl"}]),n(C,[{id:"hela",name:"Hela, Goddess of Underworld"},{id:"ariel",name:"Ariel, Summoner of the Seas"},{id:"hilda",name:"Hilda, Manifest of Strength"},{id:"nuala",name:"Nuala, Shadow in the Water"}])});function te(l,a){e(k)&&(R(i,e(i)[a][l]={tile:e(k)}),n(i,[...e(i)]))}function ie(){n(k,null)}function me(l,a){if(ie(),!e(i)[a][l]){alert("Please select a tile first.");return}n(V,{x:l,y:a}),n(K,!0)}function _e(){const{x:l,y:a}=e(V);e(D)?R(i,e(i)[a][l].event={type:"npc",id:e(D)}):e(H)?R(i,e(i)[a][l].event={type:"location",description:e(H)}):e(M)&&R(i,e(i)[a][l].event={type:"enemy",id:e(M)}),n(i,[...e(i)]),j()}function j(){n(K,!1),n(D,""),n(M,""),n(H,"")}function pe(){const l={tiles:[],events:[]};for(let a=0;a<w;a++)for(let s=0;s<N;s++)e(i)[a][s]&&(l.tiles.push({x:s,y:a,image:e(i)[a][s].tile}),e(i)[a][s].event&&l.events.push({x:s,y:a,...e(i)[a][s].event}));return JSON.stringify(l,null,2)}Re();var le=ze();De(l=>{Ge.title="Map Creator"});var z=Me(le),q=v(z);Z(q,"--grid-height: 20;"),B(q,5,()=>e(i),U,(l,a,s)=>{var g=qe();B(g,5,()=>e(a),U,(I,x,E)=>{var c=Ve(),X=v(c);{var W=A=>{var S=Ue(),$=v(S,!0);r(S),h(P=>F($,P),[()=>e(x).event.type.charAt(0).toUpperCase()]),b(A,S)};ue(X,A=>{e(x)?.event&&A(W)})}r(c),h(()=>Z(c,`background-image: url(${(e(x)?.tile||"")??""})`)),_("mousedown",c,()=>{n(L,!0),te(E,s)}),_("mouseup",c,()=>n(L,!1)),_("mouseover",c,()=>{e(L)&&te(E,s)}),_("contextmenu",c,$e(()=>me(E,s))),b(I,c)}),r(g),b(l,g)}),r(q);var se=o(q,2),Q=o(v(se),2);B(Q,5,()=>e(d),U,(l,a)=>{var s=Fe();let g;h(I=>{g=Pe(s,1,"tile-preview svelte-oefn5i",null,g,I),Z(s,`background-image: url(${e(a)??""})`)},[()=>({selected:e(k)===e(a)})]),_("click",s,()=>n(k,e(k)===e(a)?null:e(a))),b(l,s)}),r(Q);var ne=o(Q,2),re=o(ne,2),oe=o(re,6);He(oe),r(se),r(z);var ge=o(z,2);{var he=l=>{var a=je(),s=v(a),g=v(s),I=v(g);r(g);var x=o(g,2),E=o(v(x),2);h(()=>{e(D),ce(()=>{e(G)})});var c=v(E);c.value=c.__value="";var X=o(c);B(X,1,()=>e(G),U,(u,T)=>{var f=Ke(),Y=v(f,!0);r(f);var J={};h(()=>{F(Y,e(T).name),J!==(J=e(T).id)&&(f.value=(f.__value=e(T).id)??"")}),b(u,f)}),r(E),r(x);var W=o(x,2),A=o(v(W),2);We(A),r(W);var S=o(W,2),$=o(v(S),2);h(()=>{e(M),ce(()=>{e(C)})});var P=v($);P.value=P.__value="";var be=o(P);B(be,1,()=>e(C),U,(u,T)=>{var f=Le(),Y=v(f,!0);r(f);var J={};h(()=>{F(Y,e(T).name),J!==(J=e(T).id)&&(f.value=(f.__value=e(T).id)??"")}),b(u,f)}),r($),r(S);var ve=o(S,2),de=v(ve),ye=o(de,2);r(ve),r(s),r(a),h(()=>F(I,`Add Event to Tile (${e(V).x??""}, ${e(V).y??""})`)),fe(E,()=>e(D),u=>n(D,u)),Be(A,()=>e(H),u=>n(H,u)),fe($,()=>e(M),u=>n(M,u)),_("click",de,_e),_("click",ye,j),_("click",s,Je(function(u){Oe.call(this,p,u)})),_("click",a,j),b(l,a)};ue(ge,l=>{e(K)&&l(he)})}h(l=>Ie(oe,l),[pe]),_("click",ne,()=>{for(let l=0;l<w;l++)for(let a=0;a<N;a++)R(i,e(i)[l][a]={tile:e(k)});n(i,[...e(i)])}),_("click",re,ie),b(t,le),Ae()}export{oa as component};
