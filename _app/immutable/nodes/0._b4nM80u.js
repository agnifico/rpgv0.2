import"../chunks/DsnmJJEf.js";import{ap as La,C as ea,k as P,aq as i,ax as b,az as da,ar as r,as as Ma,au as e,av as s,at as o,d as a,ay as d,aG as Aa,aB as N,aw as T,aA as Da,aE as Ea,aF as Ga,B as Oa}from"../chunks/eVu4eyQM.js";import{b as Ra,s as ja}from"../chunks/dkP-lNZr.js";import{s as c}from"../chunks/C1T0uLfW.js";import"../chunks/BICuxwOm.js";import{i as f}from"../chunks/CbkWCvrX.js";import{s as xa}from"../chunks/OT850oBl.js";import{s as ba}from"../chunks/CW4uCI9b.js";import{i as Ca}from"../chunks/BQk6HzGS.js";import{s as qa,a as Ba}from"../chunks/DDy39nHp.js";import{g as ta}from"../chunks/BOSI5car.js";import{e as ka,i as $a}from"../chunks/Unz2ohpb.js";import{b as Na}from"../chunks/D63EYBSs.js";import{a as Pa}from"../chunks/BqlTOgs2.js";const Fa=!0,$s=Object.freeze(Object.defineProperty({__proto__:null,prerender:Fa},Symbol.toStringTag,{value:"Module"})),Ja=""+new URL("../assets/favicon.Dkffvfal.svg",import.meta.url).href;var Ua=i('<button class="time-of-day svelte-acorxr"><img alt="Day" class="svelte-acorxr"/></button>'),Ia=i('<button class="time-of-day svelte-acorxr"><img alt="Night" class="svelte-acorxr"/></button>'),Ka=i('<nav class="top-navbar svelte-acorxr"><div class="top-icons svelte-acorxr"><a><button class="curved-brown-left svelte-acorxr"><img alt="Home" class="svelte-acorxr"/></button></a> <button class="hamburger-menu svelte-acorxr"><img alt="Menu" class="svelte-acorxr"/></button> <div><button class="icon64 svelte-acorxr"><img alt="Settings" class="svelte-acorxr"/></button> <button class="icon64 svelte-acorxr"><a><img alt="Settings" class="svelte-acorxr"/></a></button> <button class="icon64 svelte-acorxr"><a><img alt="Settings" class="svelte-acorxr"/></a></button> <button class="icon64 svelte-acorxr"><img alt="Save" class="svelte-acorxr"/></button> <button class="icon64 svelte-acorxr"><img alt="Load" class="svelte-acorxr"/></button></div></div> <!> <div class="spacer svelte-acorxr"></div> <div class="player-stats-navbar svelte-acorxr"><div class="hp-bar-container svelte-acorxr"><div class="hp-bar svelte-acorxr"></div> <span class="hp-text svelte-acorxr"> </span></div> <div class="aura-bar-container svelte-acorxr"><div></div> <span class="aura-text svelte-acorxr"> </span></div></div></nav>');function Qa(ra,oa){La(oa,!1);const[A,L]=Ba();let v=ea(qa(ta,"$gameStore",A)),V="The time of day: Dawn / Dusk - changes every 50 steps you take.",E=ea(!1);const F=()=>{P(E,!a(E))};ta.subscribe(l=>{P(v,l)}),Ca();var va=Ka(),la=e(va),h=e(la);c(h,"href","./");var w=e(h),p=e(w);c(p,"src","./game_icons/home_page.png"),s(w),s(h);var g=o(h,2),W=e(g);c(W,"src","./game_icons/menu.png"),s(g);var ia=o(g,2);let ga;var y=e(ia),G=e(y);c(G,"src","./game_icons/settings.png"),s(y);var z=o(y,2),M=e(z);c(M,"href","./map");var na=e(M);c(na,"src","./game_icons/map.png"),s(M),s(z);var J=o(z,2),C=e(J);c(C,"href","./inventory");var t=e(C);c(t,"src","./game_icons/inventory.png"),s(C),s(J);var S=o(J,2),ca=e(S);c(ca,"src","./game_icons/save.png"),s(S);var O=o(S,2),U=e(O);c(U,"src","./game_icons/load.png"),s(O),s(ia),s(la);var k=o(la,2);{var R=l=>{var n=Ua();c(n,"title",V),ba(n,"",{},{"background-color":"#6abbcd","border-color":"#bce5f6"});var D=e(n);c(D,"src","./game_icons/day.png"),s(n),r(l,n)},I=l=>{var n=Ia();c(n,"title",V),ba(n,"",{},{"background-color":"#2f488b","border-color":"#c68df5"});var D=e(n);c(D,"src","./game_icons/night.png"),s(n),r(l,n)};f(k,l=>{a(v).timeOfDay=="day"?l(R):l(I,!1)})}var X=o(k,4),j=e(X),_=e(j),m=o(_,2),H=e(m);s(m),s(j);var K=o(j,2),Q=e(K);let $;var u=o(Q,2),q=e(u,!0);s(u),s(K),s(X),s(va),b((l,n)=>{ga=xa(ia,1,"mobile-menu-items svelte-acorxr",null,ga,l),ba(_,`width: ${a(v).player.hp/a(v).player.maxHp*100}%;`),d(H,`${a(v).player.hp??""}/${a(v).player.maxHp??""}`),$=xa(Q,1,"aura-bar svelte-acorxr",null,$,n),d(q,a(v).player.aura)},[()=>({"show-mobile-menu":a(E)}),()=>({active:a(v).player.aura>0})]),da("click",g,F),da("click",S,()=>ta.saveGame()),da("click",O,()=>ta.loadGame()),r(ra,va),Ma(),L()}var Va=i('<div class="turn-start svelte-xgdwyz"><h4 class="svelte-xgdwyz"> </h4> <div class="hp-bar-container svelte-xgdwyz"><div class="hp-bar svelte-xgdwyz"></div> <span class="hp-text svelte-xgdwyz"> </span></div></div>'),Wa=i('<span class="critical svelte-xgdwyz">(Critical Hit!)</span>'),Xa=i('<div><span class="svelte-xgdwyz"> <span class="damage svelte-xgdwyz"> </span> damage!</span> <!></div>'),Ya=i('<div><span class="svelte-xgdwyz"> </span></div>'),Za=i('<div class="total-damage-log svelte-xgdwyz"><span> <span class="damage svelte-xgdwyz"> </span> total damage.</span></div>'),as=i('<div class="dodge-log svelte-xgdwyz"><span> </span></div>'),ss=i('<div class="heal-log svelte-xgdwyz"><span> </span></div>'),es=i('<div class="aura-log svelte-xgdwyz"><span> </span></div>'),ts=i('<div class="round-container svelte-xgdwyz"><h3 class="round-title svelte-xgdwyz"> </h3> <!></div>'),rs=i('<li class="svelte-xgdwyz"> </li>'),os=i('<div class="drops-log svelte-xgdwyz"><span class="svelte-xgdwyz">Drops:</span> <ul class="svelte-xgdwyz"></ul></div>'),vs=i('<div class="final-result svelte-xgdwyz"><p class="svelte-xgdwyz"> </p> <!></div>'),ls=i('<div class="combat-log-overlay svelte-xgdwyz"><div class="combat-log-modal svelte-xgdwyz"><button class="close-button svelte-xgdwyz">&times;</button> <h2 class="svelte-xgdwyz">Combat Log</h2> <div class="log-content svelte-xgdwyz"></div> <!></div></div>');function is(ra,oa){La(oa,!1);let A=ea([]),L=ea(!1),x=ea(),v=ea(null);const V=ta.subscribe(h=>{if(P(L,h.showCombatLog),a(L)){const w=[];let p=null;h.combatLogMessages.forEach(g=>{g.type==="roundStart"?(p&&w.push(p),p={round:g.round,entries:[]}):g.type==="finalMessage"&&P(v,g),p&&p.entries.push(g)}),p&&w.push(p),P(A,w)}else P(A,[]),P(v,null);a(L)&&a(x)&&setTimeout(()=>{Aa(x,a(x).scrollTop=a(x).scrollHeight)},0)});Ra(()=>{V()});function E(){ta.closeCombatLog()}Ca();var F=N(),va=T(F);{var la=h=>{var w=ls(),p=e(w),g=e(p),W=o(g,4);ka(W,5,()=>a(A),$a,(y,G)=>{var z=ts(),M=e(z),na=e(M);s(M);var J=o(M,2);ka(J,1,()=>a(G).entries,$a,(C,t)=>{var S=N(),ca=T(S);{var O=k=>{var R=Va(),I=e(R),X=e(I);s(I);var j=o(I,2),_=e(j),m=o(_,2),H=e(m);s(m),s(j),s(R),b(()=>{d(X,`${a(t).character??""}'s Turn`),ba(_,`width: ${a(t).hp/a(t).maxHp*100}%;`),d(H,`${a(t).hp??""} / ${a(t).maxHp??""}`)}),r(k,R)},U=k=>{var R=N(),I=T(R);{var X=_=>{var m=Xa(),H=e(m),K=e(H),Q=o(K),$=e(Q,!0);s(Q),Da(),s(H);var u=o(H,2);{var q=l=>{var n=Wa();r(l,n)};f(u,l=>{a(t).isCritical&&l(q)})}s(m),b(()=>{xa(m,1,`attack-log ${a(t).attackType??""}`,"svelte-xgdwyz"),d(K,`${a(t).attacker??""} attacks ${a(t).defender??""} for `),d($,a(t).damage)}),r(_,m)},j=_=>{var m=N(),H=T(m);{var K=$=>{var u=Ya(),q=e(u),l=e(q);s(q),s(u),b(()=>{xa(u,1,`no-damage-log ${a(t).attackType??""}`,"svelte-xgdwyz"),d(l,`${a(t).attacker??""}'s ${a(t).attackType??""} attack fails! ${a(t).defender??""}'s defences were too high.`)}),r($,u)},Q=$=>{var u=N(),q=T(u);{var l=D=>{var Y=Za(),ma=e(Y),pa=e(ma),_a=o(pa),B=e(_a,!0);s(_a),Da(),s(ma),s(Y),b(()=>{d(pa,`${a(t).defender??""} takes `),d(B,a(t).damage)}),r(D,Y)},n=D=>{var Y=N(),ma=T(Y);{var pa=B=>{var Z=as(),ua=e(Z),ha=e(ua);s(ua),s(Z),b(()=>d(ha,`${a(t).defender??""} dodges the attack!`)),r(B,Z)},_a=B=>{var Z=N(),ua=T(Z);{var ha=aa=>{var sa=ss(),fa=e(sa),wa=e(fa);s(fa),s(sa),b(()=>d(wa,`${a(t).character??""} heals for ${a(t).amount??""} HP.`)),r(aa,sa)},Ha=aa=>{var sa=N(),fa=T(sa);{var wa=ya=>{var za=es(),Sa=e(za),Ta=e(Sa);s(Sa),s(za),b(()=>d(Ta,`Aura absorbs ${a(t).amount??""} damage.`)),r(ya,za)};f(fa,ya=>{a(t).type==="auraAbsorb"&&ya(wa)},!0)}r(aa,sa)};f(ua,aa=>{a(t).type==="heal"?aa(ha):aa(Ha,!1)},!0)}r(B,Z)};f(ma,B=>{a(t).type==="dodge"?B(pa):B(_a,!1)},!0)}r(D,Y)};f(q,D=>{a(t).type==="totalDamage"?D(l):D(n,!1)},!0)}r($,u)};f(H,$=>{a(t).type==="noDamage"?$(K):$(Q,!1)},!0)}r(_,m)};f(I,_=>{a(t).type==="attack"?_(X):_(j,!1)},!0)}r(k,R)};f(ca,k=>{a(t).type==="turnStart"?k(O):k(U,!1)})}r(C,S)}),s(z),b(()=>d(na,`Round ${a(G).round??""}`)),r(y,z)}),s(W),Na(W,y=>P(x,y),()=>a(x));var ia=o(W,2);{var ga=y=>{var G=vs(),z=e(G),M=e(z,!0);s(z);var na=o(z,2);{var J=C=>{var t=os(),S=o(e(t),2);ka(S,5,()=>a(v).drops,$a,(ca,O)=>{var U=rs(),k=e(U);s(U),b(()=>d(k,`${a(O).quantity??""}x ${a(O).name??""}`)),r(ca,U)}),s(S),s(t),r(C,t)};f(na,C=>{a(v).drops&&a(v).drops.length>0&&C(J)})}s(G),b(()=>d(M,a(v).message)),r(y,G)};f(ia,y=>{a(v)&&y(ga)})}s(p),s(w),da("click",g,E),da("click",w,Pa(E)),r(h,w)};f(va,h=>{a(L)&&h(la)})}r(ra,F),Ma()}var ns=i('<link rel="icon"/>'),cs=i('<!> <div class="page-content"><!></div> <!>',1);function Ss(ra,oa){var A=cs();Ea(E=>{var F=ns();Ga.title="Dawn's Journey : A serverless browser based game",b(()=>c(F,"href",Ja)),r(E,F)});var L=T(A);Qa(L,{});var x=o(L,2),v=e(x);ja(v,()=>oa.children??Oa),s(x);var V=o(x,2);is(V,{}),r(ra,A)}export{Ss as component,$s as universal};
