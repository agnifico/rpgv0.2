import"../chunks/DsnmJJEf.js";import"../chunks/BICuxwOm.js";import{o as he}from"../chunks/dkP-lNZr.js";import{ap as be,C as m,aq as g,aE as ye,aw as we,ax as f,az as p,ar as _,as as ke,aF as xe,au as r,at as n,d as e,k as l,av as o,aH as Ee,aG as G,ay as W,aI as ne}from"../chunks/eVu4eyQM.js";import{i as re}from"../chunks/CbkWCvrX.js";import{e as H,i as I}from"../chunks/Unz2ohpb.js";import{a as Te,r as Ne}from"../chunks/C1T0uLfW.js";import{s as Ce}from"../chunks/OT850oBl.js";import{s as Q}from"../chunks/CW4uCI9b.js";import{a as Se}from"../chunks/BvzZmEeN.js";import{b as ve}from"../chunks/CX_y69Wb.js";import{p as De,s as Me}from"../chunks/BqlTOgs2.js";import{i as Ae}from"../chunks/BQk6HzGS.js";import{b as Ge}from"../chunks/DMhMeZ7T.js";var He=g('<div class="event-marker svelte-oefn5i"> </div>'),Ie=g('<div class="grid-cell svelte-oefn5i"><!></div>'),$e=g('<div class="grid-row svelte-oefn5i"></div>'),Pe=g("<div></div>"),We=g("<option> </option>"),Je=g("<option> </option>"),Oe=g('<div class="modal-backdrop svelte-oefn5i"><div class="modal svelte-oefn5i"><h3> </h3> <div class="form-group svelte-oefn5i"><label for="npc-select">NPC</label> <select id="npc-select"><option>None</option><!></select></div> <div class="form-group svelte-oefn5i"><label for="location-event">Location Event</label> <input type="text" id="location-event"/></div> <div class="form-group svelte-oefn5i"><label for="enemy-select">Enemy</label> <select id="enemy-select"><option>None</option><!></select></div> <div class="modal-buttons svelte-oefn5i"><button>Save</button> <button>Cancel</button></div></div></div>'),Re=g('<div class="map-creator-container svelte-oefn5i"><div class="grid-container svelte-oefn5i"></div> <div class="controls-container svelte-oefn5i"><h2>Tiles</h2> <div class="tile-palette svelte-oefn5i"></div> <button>Fill All</button> <button>Clear Selected Tile</button> <hr/> <h2>JSON Output</h2> <textarea readonly="" class="svelte-oefn5i"></textarea></div></div> <!>',1);function aa(de,V){be(V,!1);const J=20,O=20;let i=m(Array(O).fill(null).map(()=>Array(J).fill(null))),X=m([]),R=m([]),B=m([]),h=m(null),x=m(""),E=m(""),N=m(""),F=m(!1),$=m({x:0,y:0}),U=m(!1);he(async()=>{l(X,["/images/tiles/grass1.png","/images/tiles/grass2.png","/images/tiles/grass3.png","/images/tiles/grass4.png","/images/tiles/grass5.png","/images/tiles/grass6.png","/images/tiles/grass7.png","/images/tiles/grass8.png","/images/tiles/grass9.png","/images/tiles/water0.png","/images/tiles/water4.png","/images/tiles/waterBoat1.png","/images/tiles/waterBoat2.png","/images/tiles/waterPlant.png","/images/tiles/waterRock.png"]),l(R,[{id:"cassie",name:"Cassie"},{id:"kitana",name:"Kitana"},{id:"neela",name:"Neela, Water Nymph"},{id:"cygwin",name:"Cygwin, The Dubitable Nun"},{id:"wachiwi",name:"Wachiwi, The Dancing Girl"}]),l(B,[{id:"hela",name:"Hela, Goddess of Underworld"},{id:"ariel",name:"Ariel, Summoner of the Seas"},{id:"hilda",name:"Hilda, Manifest of Strength"},{id:"nuala",name:"Nuala, Shadow in the Water"}])});function Y(t,a){e(h)&&(G(i,e(i)[a][t]={tile:e(h)}),l(i,[...e(i)]))}function Z(){l(h,null)}function ce(t,a){if(Z(),!e(i)[a][t]){alert("Please select a tile first.");return}l($,{x:t,y:a}),l(F,!0)}function me(){const{x:t,y:a}=e($);e(x)?G(i,e(i)[a][t].event={type:"npc",id:e(x)}):e(N)?G(i,e(i)[a][t].event={type:"location",description:e(N)}):e(E)&&G(i,e(i)[a][t].event={type:"enemy",id:e(E)}),l(i,[...e(i)]),q()}function q(){l(F,!1),l(x,""),l(E,""),l(N,"")}function pe(){const t={tiles:[],events:[]};for(let a=0;a<O;a++)for(let s=0;s<J;s++)e(i)[a][s]&&(t.tiles.push({x:s,y:a,image:e(i)[a][s].tile}),e(i)[a][s].event&&t.events.push({x:s,y:a,...e(i)[a][s].event}));return JSON.stringify(t,null,2)}Ae();var ee=Re();ye(t=>{xe.title="Map Creator"});var z=we(ee),P=r(z);Q(P,"--grid-height: 20;"),H(P,5,()=>e(i),I,(t,a,s)=>{var u=$e();H(u,5,()=>e(a),I,(C,b,y)=>{var v=Ie(),L=r(v);{var S=T=>{var w=He(),D=r(w,!0);o(w),f(M=>W(D,M),[()=>e(b).event.type.charAt(0).toUpperCase()]),_(T,w)};re(L,T=>{e(b)?.event&&T(S)})}o(v),f(()=>Q(v,`background-image: url(${(e(b)?.tile||"")??""})`)),p("mousedown",v,()=>{l(U,!0),Y(y,s)}),p("mouseup",v,()=>l(U,!1)),p("mouseover",v,()=>{e(U)&&Y(y,s)}),p("contextmenu",v,De(()=>ce(y,s))),_(C,v)}),o(u),_(t,u)}),o(P);var ae=n(P,2),K=n(r(ae),2);H(K,5,()=>e(X),I,(t,a)=>{var s=Pe();let u;f(C=>{u=Ce(s,1,"tile-preview svelte-oefn5i",null,u,C),Q(s,`background-image: url(${e(a)??""})`)},[()=>({selected:e(h)===e(a)})]),p("click",s,()=>l(h,e(h)===e(a)?null:e(a))),_(t,s)}),o(K);var te=n(K,2),ie=n(te,2),se=n(ie,6);Ee(se),o(ae),o(z);var ue=n(z,2);{var fe=t=>{var a=Oe(),s=r(a),u=r(s),C=r(u);o(u);var b=n(u,2),y=n(r(b),2);f(()=>{e(x),ne(()=>{e(R)})});var v=r(y);v.value=v.__value="";var L=n(v);H(L,1,()=>e(R),I,(d,k)=>{var c=We(),j=r(c,!0);o(c);var A={};f(()=>{W(j,e(k).name),A!==(A=e(k).id)&&(c.value=(c.__value=e(k).id)??"")}),_(d,c)}),o(y),o(b);var S=n(b,2),T=n(r(S),2);Ne(T),o(S);var w=n(S,2),D=n(r(w),2);f(()=>{e(E),ne(()=>{e(B)})});var M=r(D);M.value=M.__value="";var _e=n(M);H(_e,1,()=>e(B),I,(d,k)=>{var c=Je(),j=r(c,!0);o(c);var A={};f(()=>{W(j,e(k).name),A!==(A=e(k).id)&&(c.value=(c.__value=e(k).id)??"")}),_(d,c)}),o(D),o(w);var le=n(w,2),oe=r(le),ge=n(oe,2);o(le),o(s),o(a),f(()=>W(C,`Add Event to Tile (${e($).x??""}, ${e($).y??""})`)),ve(y,()=>e(x),d=>l(x,d)),Se(T,()=>e(N),d=>l(N,d)),ve(D,()=>e(E),d=>l(E,d)),p("click",oe,me),p("click",ge,q),p("click",s,Me(function(d){Ge.call(this,V,d)})),p("click",a,q),_(t,a)};re(ue,t=>{e(F)&&t(fe)})}f(t=>Te(se,t),[pe]),p("click",te,()=>{for(let t=0;t<O;t++)for(let a=0;a<J;a++)G(i,e(i)[t][a]={tile:e(h)});l(i,[...e(i)])}),p("click",ie,Z),_(de,ee),ke()}export{aa as component};
