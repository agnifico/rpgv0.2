import"../chunks/DsnmJJEf.js";import"../chunks/CLf4CbaX.js";import{o as Ye}from"../chunks/bJgjr3oX.js";import{ap as je,m as S,s as I,aB as ze,aC as Fe,aq as m,aD as He,ar as f,as as v,at as Je,aE as Ke,au as o,g as e,av as d,u as i,ax as r,aA as T}from"../chunks/C9d5v2_X.js";import{e as u,s as R}from"../chunks/CxpGAOF5.js";import{i as _}from"../chunks/DN0X4rAG.js";import{e as V,i as pe}from"../chunks/BLjquezv.js";import{s as h}from"../chunks/OwQstUqB.js";import{s as X,a as Oe,b as Ve}from"../chunks/BgMmMX2O.js";import{b as Xe}from"../chunks/EgJc2U9m.js";import{i as Ze}from"../chunks/BQ3WBjMy.js";import{s as et,a as tt}from"../chunks/DFZtd7Ml.js";import{g as x,i as ue,a as Z}from"../chunks/BMfR17sD.js";var at=m('<img class="item-thumbnail svelte-nxcxqd"/> <button class="unequip-button svelte-nxcxqd">Unequip</button>',1),st=m('<div class="empty-slot svelte-nxcxqd">Weapon 1</div>'),nt=m('<img class="item-thumbnail svelte-nxcxqd"/> <button class="unequip-button svelte-nxcxqd">Unequip</button>',1),it=m('<div class="empty-slot svelte-nxcxqd">Weapon 2</div>'),lt=m('<img class="item-thumbnail svelte-nxcxqd"/> <button class="unequip-button svelte-nxcxqd">Unequip</button>',1),ot=m('<div class="empty-slot svelte-nxcxqd"></div>'),rt=m('<div class="equipment-slot svelte-nxcxqd"><!></div>'),ct=m('<span class="item-quantity-tooltip svelte-nxcxqd"> </span>'),vt=m('<div class="item-slot svelte-nxcxqd"><img class="item-thumbnail svelte-nxcxqd"/> <!></div>'),dt=m("<p>No items in this category.</p>"),mt=m('<div class="backpack-grid svelte-nxcxqd"></div>'),pt=m("<p>No items in this category.</p>"),ut=m('<span class="item-tag equippable svelte-nxcxqd">Equippable</span>'),xt=m('<span class="item-tag consumable svelte-nxcxqd">Consumable</span>'),_t=m('<span class="item-tag special svelte-nxcxqd">Special</span>'),bt=m('<span class="item-tag quantity svelte-nxcxqd"> </span>'),qt=m('<p class="item-description svelte-nxcxqd"> </p>'),ft=m("<li> </li>"),gt=m('<h4 class="svelte-nxcxqd">Stats:</h4> <ul></ul>',1),It=m('<span class="drop-tooltip svelte-nxcxqd"> </span>'),ht=m('<div class="item-details-modal-overlay svelte-nxcxqd"><div class="item-details-modal svelte-nxcxqd"><button class="close-modal-button svelte-nxcxqd">&times;</button> <h3 class="svelte-nxcxqd"> </h3> <img class="modal-item-thumbnail svelte-nxcxqd"/> <div class="item-tags svelte-nxcxqd"><!> <!> <!> <!></div> <!> <!> <div class="item-actions svelte-nxcxqd"><button class="equip-button svelte-nxcxqd">Equip</button> <button class="consume-button svelte-nxcxqd">Consume</button> <div class="drop-button-container svelte-nxcxqd"><button class="svelte-nxcxqd">Drop</button> <!></div></div></div></div>'),yt=m('<main tabindex="0" class="svelte-nxcxqd"><h1 class="svelte-nxcxqd">Inventory</h1> <div class="inventory-container svelte-nxcxqd"><div class="equipment-panel svelte-nxcxqd"><h2 class="svelte-nxcxqd">Equipment</h2> <div class="equipment-grid svelte-nxcxqd"><div class="equipment-slot svelte-nxcxqd"><!></div> <div class="equipment-slot svelte-nxcxqd"><!></div> <!></div></div> <div class="backpack-panel svelte-nxcxqd"><div class="tab-navigation svelte-nxcxqd"><button><img src="./game_icons/general_tab.png" alt="General" class="tab-icon svelte-nxcxqd"/> General</button> <button><img src="./game_icons/weapons_tab.png" alt="Weapons" class="tab-icon svelte-nxcxqd"/> Weapons</button> <button><img src="./game_icons/relics_tab.png" alt="Relics" class="tab-icon svelte-nxcxqd"/> Relics</button></div> <div class="tab-content svelte-nxcxqd"><!></div></div></div> <!></main>');function Ut(xe,ee){je(ee,!1);const[_e,be]=tt(),qe=()=>et(x,"$gameStore",_e),W=S();let t=S(qe()),y=S("general");x.subscribe(a=>{I(t,a)});let $=S();Ye(()=>{e($)&&e($).focus();const a=s=>{s.key==="Escape"&&e(t).showItemDetails&&x.closeItemDetails()};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}});let U=S(!1),B=S("");function fe(a){(a.cannotDrop||a.special)&&(I(U,!0),I(B,"You can't drop that, it's important or special!"))}function ge(){I(U,!1),I(B,"")}function Ie(a){if(!a)return!1;const s=e(t).player.equipment;return!!(s.weapon1&&s.weapon1.id===a.id||s.weapon2&&s.weapon2.id===a.id||s.relics.some(l=>l&&l.id===a.id))}function te(a){if(!a)return 0;const s=e(t).player.backpack.find(l=>l.item.id===a.id);return s?s.quantity:0}ze(()=>(e(t),e(y),Z),()=>{I(W,e(t).player.backpack.filter(a=>e(y)==="weapons"?ue(a.item):e(y)==="relics"?Z(a.item):!ue(a.item)&&!Z(a.item)))}),Fe(),Ze();var G=yt();He(a=>{Ke.title="Inventory - RPG"});var N=o(d(G),2),P=d(N),ae=o(d(P),2),A=d(ae),he=d(A);{var ye=a=>{var s=at(),l=T(s),c=o(l,2);f(()=>{h(l,"src",(e(t),i(()=>e(t).player.equipment.weapon1.thumbnailImage))),h(l,"alt",(e(t),i(()=>e(t).player.equipment.weapon1.name)))}),u("click",l,()=>x.openItemDetails(e(t).player.equipment.weapon1)),u("click",c,()=>x.unequipItem(e(t).player.equipment.weapon1)),v(a,s)},we=a=>{var s=st();v(a,s)};_(he,a=>{e(t),i(()=>e(t).player.equipment.weapon1)?a(ye):a(we,!1)})}r(A);var Q=o(A,2),ke=d(Q);{var De=a=>{var s=nt(),l=T(s),c=o(l,2);f(()=>{h(l,"src",(e(t),i(()=>e(t).player.equipment.weapon2.thumbnailImage))),h(l,"alt",(e(t),i(()=>e(t).player.equipment.weapon2.name)))}),u("click",l,()=>x.openItemDetails(e(t).player.equipment.weapon2)),u("click",c,()=>x.unequipItem(e(t).player.equipment.weapon2)),v(a,s)},Ee=a=>{var s=it();v(a,s)};_(ke,a=>{e(t),i(()=>e(t).player.equipment.weapon2)?a(De):a(Ee,!1)})}r(Q);var Ce=o(Q,2);V(Ce,1,()=>(e(t),i(()=>e(t).player.equipment.relics)),pe,(a,s,l)=>{var c=rt(),w=d(c);{var k=b=>{var q=lt(),g=T(q),C=o(g,2);f(()=>{h(g,"src",(e(s),i(()=>e(s).thumbnailImage))),h(g,"alt",(e(s),i(()=>e(s).name)))}),u("click",g,()=>x.openItemDetails(e(s))),u("click",C,()=>x.unequipItem(e(s))),v(b,q)},E=b=>{var q=ot();q.textContent=`Relic ${l+1}`,v(b,q)};_(w,b=>{e(s)?b(k):b(E,!1)})}r(c),v(a,c)}),r(ae),r(P);var se=o(P,2),Y=d(se),j=d(Y);let ne;var z=o(j,2);let ie;var le=o(z,2);let oe;r(Y);var re=o(Y,2),Se=d(re);{var Re=a=>{var s=mt();V(s,5,()=>e(W),l=>l.item.id,(l,c)=>{var w=vt(),k=d(w),E=o(k,2);{var b=q=>{var g=ct(),C=d(g);r(g),f(()=>R(C,`x${e(c),i(()=>e(c).quantity)??""}`)),v(q,g)};_(E,q=>{e(c),i(()=>e(c).quantity>1)&&q(b)})}r(w),f(()=>{h(k,"src",(e(c),i(()=>e(c).item.thumbnailImage))),h(k,"alt",(e(c),i(()=>e(c).item.name)))}),u("click",k,()=>x.openItemDetails(e(c).item)),v(l,w)},l=>{var c=dt();v(l,c)}),r(s),v(a,s)},We=a=>{var s=pt();v(a,s)};_(Se,a=>{e(W),i(()=>e(W).length>0)?a(Re):a(We,!1)})}r(re),r(se),r(N);var $e=o(N,2);{var Ge=a=>{var s=ht(),l=d(s),c=d(l),w=o(c,2),k=d(w,!0);r(w);var E=o(w,2),b=o(E,2),q=d(b);{var g=n=>{var p=ut();v(n,p)};_(q,n=>{e(t),i(()=>e(t).selectedItem.equippable)&&n(g)})}var C=o(q,2);{var Le=n=>{var p=xt();v(n,p)};_(C,n=>{e(t),i(()=>e(t).selectedItem.consumable)&&n(Le)})}var ce=o(C,2);{var Me=n=>{var p=_t();v(n,p)};_(ce,n=>{e(t),i(()=>e(t).selectedItem.special)&&n(Me)})}var Te=o(ce,2);{var Ue=n=>{var p=bt(),D=d(p);r(p),f(K=>R(D,`x${K??""}`),[()=>(e(t),i(()=>te(e(t).selectedItem)))]),v(n,p)};_(Te,n=>{e(t),i(()=>te(e(t).selectedItem)>0)&&n(Ue)})}r(b);var ve=o(b,2);{var Be=n=>{var p=qt(),D=d(p,!0);r(p),f(()=>R(D,(e(t),i(()=>e(t).selectedItem.description)))),v(n,p)};_(ve,n=>{e(t),i(()=>e(t).selectedItem.description)&&n(Be)})}var de=o(ve,2);{var Ne=n=>{var p=gt(),D=o(T(p),2);V(D,5,()=>(e(t),i(()=>e(t).selectedItem.stats)),pe,(K,M)=>{var O=ft(),Qe=d(O);r(O),f(()=>R(Qe,`${e(M),i(()=>e(M).name)??""}: ${e(M),i(()=>e(M).value)??""}`)),v(K,O)}),r(D),v(n,p)};_(de,n=>{e(t),i(()=>e(t).selectedItem.stats.length>0)&&n(Ne)})}var me=o(de,2),F=d(me),H=o(F,2),L=o(H,2),J=d(L),Pe=o(J,2);{var Ae=n=>{var p=It(),D=d(p,!0);r(p),f(()=>R(D,e(B))),v(n,p)};_(Pe,n=>{e(U)&&n(Ae)})}r(L),r(me),r(l),r(s),f(n=>{R(k,(e(t),i(()=>e(t).selectedItem.name))),h(E,"src",(e(t),i(()=>e(t).selectedItem.thumbnailImage))),h(E,"alt",(e(t),i(()=>e(t).selectedItem.name))),F.disabled=n,H.disabled=(e(t),i(()=>!e(t).selectedItem.consumable)),J.disabled=(e(t),i(()=>e(t).selectedItem.cannotDrop||e(t).selectedItem.special))},[()=>(e(t),i(()=>!e(t).selectedItem.equippable||Ie(e(t).selectedItem)))]),u("click",c,function(...n){x.closeItemDetails?.apply(this,n)}),u("click",F,()=>x.equipItem(e(t).selectedItem)),u("click",H,()=>x.consumeItem(e(t).selectedItem)),u("click",J,()=>x.dropItem(e(t).selectedItem)),u("mouseenter",L,()=>fe(e(t).selectedItem)),u("mouseleave",L,ge),u("click",l,Oe(function(n){Ve.call(this,ee,n)})),u("click",s,function(...n){x.closeItemDetails?.apply(this,n)}),v(a,s)};_($e,a=>{e(t),i(()=>e(t).showItemDetails&&e(t).selectedItem)&&a(Ge)})}r(G),Xe(G,a=>I($,a),()=>e($)),f((a,s,l)=>{ne=X(j,1,"tab-button svelte-nxcxqd",null,ne,a),ie=X(z,1,"tab-button svelte-nxcxqd",null,ie,s),oe=X(le,1,"tab-button svelte-nxcxqd",null,oe,l)},[()=>({active:e(y)==="general"}),()=>({active:e(y)==="weapons"}),()=>({active:e(y)==="relics"})]),u("click",j,()=>I(y,"general")),u("click",z,()=>I(y,"weapons")),u("click",le,()=>I(y,"relics")),v(xe,G),Je(),be()}export{Ut as component};
